<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basit YargÄ±lama EditÃ¶rÃ¼ - CMK 251</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>âš–ï¸ Basit YargÄ±lama EditÃ¶rÃ¼</h1>
            <p>CMK 251 Karar ÅablonlarÄ± ve YargÄ±tay KararlarÄ±</p>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('editor')">ğŸ“ EditÃ¶r</button>
            <button class="nav-tab" onclick="showSection('library')">ğŸ“š YargÄ±tay KÃ¼tÃ¼phanesi</button>
            <button class="nav-tab" onclick="showSection('help')">â“ YardÄ±m</button>
        </nav>

        <main>
            <!-- Editor Section -->
            <section id="editor" class="section active">
                <h2>Karar Åablonu EditÃ¶rÃ¼</h2>
                
                <div class="alert alert-info show">
                    <strong>â„¹ï¸ Bilgi:</strong> Åablonu seÃ§in, gerekli alanlarÄ± doldurun ve dÃ¼zenleyin. Ä°ÅŸlem tamamlandÄ±ÄŸÄ±nda dosyayÄ± indirebilirsiniz.
                </div>

                <div class="form-group">
                    <label for="templateSelect">Åablon SeÃ§in:</label>
                    <select id="templateSelect" onchange="loadTemplate()">
                        <option value="">-- Åablon SeÃ§iniz --</option>
                        <option value="1_Tensip_Zapti_CMK251.md">1. Tensip ZaptÄ± (CMK 251)</option>
                        <option value="2_Basit_Yargilama_Karar_Sablonu_TCK86.md">2. Basit YargÄ±lama KararÄ± (TCK 86)</option>
                        <option value="3_HAGB_Karar_Sablonu.md">3. HAGB Karar Åablonu</option>
                        <option value="4_Mahkumiyet_Karar_Sablonu.md">4. Mahkumiyet Karar Åablonu</option>
                        <option value="5_Itiraz_Uzerine_Durusma_Acilmasi.md">5. Ä°tiraz Ãœzerine DuruÅŸma AÃ§Ä±lmasÄ±</option>
                        <option value="6_Itiraz_Inceleme_Karar.md">6. Ä°tiraz Ä°nceleme KararÄ±</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="editorTextarea">Karar Metni:</label>
                    <textarea id="editorTextarea" placeholder="Åablon seÃ§ildiÄŸinde metin burada gÃ¶rÃ¼necektir..."></textarea>
                </div>

                <div>
                    <button class="btn btn-success" onclick="downloadDocument()">ğŸ’¾ DosyayÄ± Ä°ndir</button>
                    <button class="btn btn-warning" onclick="clearEditor()">ğŸ”„ Temizle</button>
                    <button class="btn btn-primary" onclick="copyToClipboard()">ğŸ“‹ Kopyala</button>
                </div>

                <div id="editorAlert" class="alert"></div>
            </section>

            <!-- Library Section -->
            <section id="library" class="section">
                <h2>YargÄ±tay KararlarÄ± KÃ¼tÃ¼phanesi</h2>
                
                <!-- Search Bar -->
                <div class="search-container">
                    <input type="search" id="searchInput" class="search-input" 
                           placeholder="Karar no, madde, anahtar kelime ile arayÄ±n... (Ã¶rn: CMK 251, HAGB, itiraz)"
                           onkeyup="handleSearchKeypress(event)">
                    <button class="btn btn-primary search-btn" onclick="searchDecisions()">ğŸ” Ara</button>
                </div>

                <!-- Statistics -->
                <div class="stats-container" id="statsContainer">
                    <div class="stat-card">
                        <div class="stat-number" id="totalDecisions">0</div>
                        <div class="stat-label">Toplam Karar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalCategories">0</div>
                        <div class="stat-label">Kategori</div>
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="category-filter" id="categoryFilter"></div>

                <!-- Search Results Alert -->
                <div id="searchAlert" class="alert"></div>

                <!-- Decisions Container -->
                <div id="decisionsContainer">
                    <p style="text-align: center; color: #7f8c8d;">KararlarÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in kategori seÃ§in veya arama yapÄ±n.</p>
                </div>
            </section>

            <!-- Help Section -->
            <section id="help" class="section">
                <h2>KullanÄ±m KÄ±lavuzu</h2>
                
                <div class="help-box">
                    <h3>ğŸ“ EditÃ¶r NasÄ±l KullanÄ±lÄ±r?</h3>
                    <ul>
                        <li><strong>Åablon SeÃ§imi:</strong> AÃ§Ä±lÄ±r menÃ¼den uygun ÅŸablonu seÃ§in</li>
                        <li><strong>DÃ¼zenleme:</strong> Metin alanÄ±nda gerekli yerleri doldurun (Ã¶rn: isimler, tarihler, bilgiler)</li>
                        <li><strong>Ä°ndirme:</strong> "DosyayÄ± Ä°ndir" butonuna tÄ±klayarak .md dosyasÄ± olarak kaydedin</li>
                        <li><strong>Kopyalama:</strong> "Kopyala" butonuyla metni panoya kopyalayÄ±n</li>
                        <li><strong>Temizleme:</strong> "Temizle" butonuyla editÃ¶rÃ¼ sÄ±fÄ±rlayÄ±n</li>
                    </ul>
                </div>

                <div class="help-box">
                    <h3>ğŸ“š YargÄ±tay KÃ¼tÃ¼phanesi NasÄ±l KullanÄ±lÄ±r?</h3>
                    <ul>
                        <li><strong>Kategori ile Arama:</strong> Kategori butonlarÄ±na tÄ±klayarak ilgili kararlarÄ± gÃ¶rÃ¼ntÃ¼leyin</li>
                        <li><strong>Arama Butonu:</strong> Arama kutusuna karar numarasÄ±, madde (Ã¶rn: CMK 251, TCK 86/2) veya anahtar kelime yazÄ±n</li>
                        <li><strong>HÄ±zlÄ± Arama:</strong> Enter tuÅŸuna basarak hÄ±zlÄ±ca arama yapabilirsiniz</li>
                        <li><strong>SonuÃ§lar:</strong> EÅŸleÅŸen kararlar karar numarasÄ±, tarih, Ã¶zet ve etiketlerle gÃ¶sterilir</li>
                    </ul>
                </div>

                <div class="help-box">
                    <h3>ğŸ” Arama Ã–rnekleri</h3>
                    <ul>
                        <li><strong>Madde ile:</strong> "CMK 251", "TCK 86/2", "CMK 231"</li>
                        <li><strong>Karar no ile:</strong> "2020/1234", "2021/5678"</li>
                        <li><strong>Konu ile:</strong> "HAGB", "itiraz", "duruÅŸma", "basit yargÄ±lama"</li>
                        <li><strong>Anahtar kelime ile:</strong> "erteleme", "tehdit", "7 gÃ¼n"</li>
                    </ul>
                </div>

                <div class="help-box">
                    <h3>âš ï¸ Hata MesajlarÄ±</h3>
                    <ul>
                        <li><strong>"SonuÃ§ bulunamadÄ±":</strong> Arama kriterlerinizi deÄŸiÅŸtirerek tekrar deneyin</li>
                        <li><strong>"Åablon seÃ§ilmedi":</strong> EditÃ¶rde iÅŸlem yapmadan Ã¶nce ÅŸablon seÃ§in</li>
                        <li><strong>"KÃ¼tÃ¼phane yÃ¼klenemedi":</strong> SayfayÄ± yenileyin, sorun devam ederse yÃ¶neticiye bildirin</li>
                    </ul>
                </div>

                <div class="help-box">
                    <h3>ğŸ“‹ HÄ±zlÄ± Referans</h3>
                    <ul>
                        <li><strong>CMK 251:</strong> Basit YargÄ±lama UsulÃ¼ (alt sÄ±nÄ±rÄ± 2 yÄ±l veya daha az)</li>
                        <li><strong>Ä°tiraz SÃ¼resi:</strong> 7 gÃ¼n (tebliÄŸden itibaren)</li>
                        <li><strong>HAGB:</strong> HÃ¼kmÃ¼n AÃ§Ä±klanmasÄ±nÄ±n Geri BÄ±rakÄ±lmasÄ± (CMK 231)</li>
                        <li><strong>TCK 50:</strong> CezanÄ±n BireyselleÅŸtirilmesi</li>
                        <li><strong>TCK 51:</strong> Hapis CezasÄ±nÄ±n Ertelenmesi</li>
                        <li><strong>TCK 52:</strong> SeÃ§enek YaptÄ±rÄ±mlar</li>
                        <li><strong>TCK 86/2:</strong> Hayat, vÃ¼cut, cinsel dokunulmazlÄ±k tehdidi (6 ay - 2 yÄ±l)</li>
                        <li><strong>TCK 86/3:</strong> MalvarlÄ±ÄŸÄ±na zarar tehdidi (6 aya kadar)</li>
                    </ul>
                </div>

                <div class="help-box">
                    <h3>â„¹ï¸ Teknik Bilgiler</h3>
                    <ul>
                        <li><strong>Dosya FormatÄ±:</strong> Markdown (.md)</li>
                        <li><strong>TarayÄ±cÄ± DesteÄŸi:</strong> Chrome, Firefox, Safari, Edge (gÃ¼ncel sÃ¼rÃ¼mler)</li>
                        <li><strong>Veri KaynaÄŸÄ±:</strong> yargitay_kararlari.json</li>
                        <li><strong>GÃ¼ncelleme:</strong> 2024</li>
                    </ul>
                </div>
            </section>
        </main>

        <footer>
            <p><strong>Basit YargÄ±lama EditÃ¶rÃ¼</strong> - CMK 251 Karar ÅablonlarÄ±</p>
            <p>Â© 2024 - Basit YargÄ±lama Ã‡alÄ±ÅŸma Grubu</p>
            <p>DetaylÄ± bilgi iÃ§in: <a href="README.md" target="_blank">README.md</a> | <a href="HIZLI_BASVURU.md" target="_blank">HÄ±zlÄ± BaÅŸvuru</a></p>
        </footer>
    </div>

    <script>
        // Global variables
        let decisionsData = null;
        let currentCategory = 'all';

        // Load decisions data on page load
        window.addEventListener('DOMContentLoaded', async () => {
            await loadDecisionsData();
            updateStats();
            renderCategoryFilters();
        });

        // Section navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Mark tab as active
            event.target.classList.add('active');
        }

        // Load template
        async function loadTemplate() {
            const select = document.getElementById('templateSelect');
            const textarea = document.getElementById('editorTextarea');
            const alertDiv = document.getElementById('editorAlert');
            
            if (!select.value) {
                textarea.value = '';
                return;
            }
            
            try {
                const response = await fetch(select.value);
                if (!response.ok) throw new Error('Åablon yÃ¼klenemedi');
                
                const text = await response.text();
                textarea.value = text;
                
                showAlert('editorAlert', 'Åablon baÅŸarÄ±yla yÃ¼klendi!', 'success');
            } catch (error) {
                showAlert('editorAlert', 'Åablon yÃ¼klenirken hata oluÅŸtu: ' + error.message, 'error');
            }
        }

        // Download document
        function downloadDocument() {
            const select = document.getElementById('templateSelect');
            const textarea = document.getElementById('editorTextarea');
            
            if (!select.value) {
                showAlert('editorAlert', 'LÃ¼tfen Ã¶nce bir ÅŸablon seÃ§in!', 'error');
                return;
            }
            
            if (!textarea.value.trim()) {
                showAlert('editorAlert', 'Metin alanÄ± boÅŸ!', 'error');
                return;
            }
            
            const blob = new Blob([textarea.value], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = select.value || 'karar.md';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showAlert('editorAlert', 'Dosya baÅŸarÄ±yla indirildi!', 'success');
        }

        // Copy to clipboard
        function copyToClipboard() {
            const textarea = document.getElementById('editorTextarea');
            
            if (!textarea.value.trim()) {
                showAlert('editorAlert', 'Kopyalanacak metin yok!', 'error');
                return;
            }
            
            textarea.select();
            document.execCommand('copy');
            
            showAlert('editorAlert', 'Metin panoya kopyalandÄ±!', 'success');
        }

        // Clear editor
        function clearEditor() {
            if (confirm('EditÃ¶rÃ¼ temizlemek istediÄŸinizden emin misiniz?')) {
                document.getElementById('templateSelect').value = '';
                document.getElementById('editorTextarea').value = '';
                showAlert('editorAlert', 'EditÃ¶r temizlendi.', 'info');
            }
        }

        // Load decisions data
        async function loadDecisionsData() {
            try {
                const response = await fetch('yargitay_kararlari.json');
                if (!response.ok) throw new Error('KÃ¼tÃ¼phane yÃ¼klenemedi');
                
                decisionsData = await response.json();
            } catch (error) {
                showAlert('searchAlert', 'YargÄ±tay kararlarÄ± kÃ¼tÃ¼phanesi yÃ¼klenirken hata oluÅŸtu: ' + error.message, 'error');
            }
        }

        // Update statistics
        function updateStats() {
            if (!decisionsData) return;
            
            let totalDecisions = 0;
            const categories = Object.keys(decisionsData.kategoriler);
            
            categories.forEach(cat => {
                totalDecisions += decisionsData.kategoriler[cat].kararlar.length;
            });
            
            document.getElementById('totalDecisions').textContent = totalDecisions;
            document.getElementById('totalCategories').textContent = categories.length;
        }

        // Render category filters
        function renderCategoryFilters() {
            if (!decisionsData) return;
            
            const container = document.getElementById('categoryFilter');
            container.innerHTML = '';
            
            // Add "All" button
            const allBtn = document.createElement('button');
            allBtn.className = 'category-btn active';
            allBtn.textContent = 'TÃ¼mÃ¼';
            allBtn.onclick = () => filterByCategory('all', allBtn);
            container.appendChild(allBtn);
            
            // Add category buttons
            Object.keys(decisionsData.kategoriler).forEach(catKey => {
                const category = decisionsData.kategoriler[catKey];
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.textContent = category.baslik;
                btn.onclick = () => filterByCategory(catKey, btn);
                container.appendChild(btn);
            });
        }

        // Filter by category
        function filterByCategory(category, buttonElement) {
            currentCategory = category;
            
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            buttonElement.classList.add('active');
            
            // Display decisions
            if (category === 'all') {
                displayAllDecisions();
            } else {
                displayCategoryDecisions(category);
            }
            
            // Clear search input
            document.getElementById('searchInput').value = '';
            hideAlert('searchAlert');
        }

        // Display all decisions
        function displayAllDecisions() {
            if (!decisionsData) return;
            
            const container = document.getElementById('decisionsContainer');
            container.innerHTML = '';
            
            Object.keys(decisionsData.kategoriler).forEach(catKey => {
                const category = decisionsData.kategoriler[catKey];
                
                const categoryTitle = document.createElement('h3');
                categoryTitle.textContent = category.baslik;
                categoryTitle.style.marginTop = '30px';
                categoryTitle.style.color = 'var(--primary-color)';
                container.appendChild(categoryTitle);
                
                category.kararlar.forEach(decision => {
                    container.appendChild(createDecisionCard(decision));
                });
            });
        }

        // Display category decisions
        function displayCategoryDecisions(categoryKey) {
            if (!decisionsData) return;
            
            const category = decisionsData.kategoriler[categoryKey];
            const container = document.getElementById('decisionsContainer');
            container.innerHTML = '';
            
            const categoryTitle = document.createElement('h3');
            categoryTitle.textContent = category.baslik;
            categoryTitle.style.color = 'var(--primary-color)';
            categoryTitle.style.marginBottom = '10px';
            container.appendChild(categoryTitle);
            
            const categoryDesc = document.createElement('p');
            categoryDesc.textContent = category.aciklama;
            categoryDesc.style.color = '#7f8c8d';
            categoryDesc.style.marginBottom = '20px';
            container.appendChild(categoryDesc);
            
            category.kararlar.forEach(decision => {
                container.appendChild(createDecisionCard(decision));
            });
        }

        // Create decision card
        function createDecisionCard(decision) {
            const card = document.createElement('div');
            card.className = 'decision-card';
            
            card.innerHTML = `
                <div class="decision-header">
                    <span class="decision-number">${decision.karar_no}</span>
                    <span class="decision-date">${decision.tarih} - ${decision.daire}</span>
                </div>
                <div class="decision-title">${decision.konu}</div>
                <div class="decision-summary">${decision.ozet}</div>
                <div class="decision-tags">
                    ${decision.ilgili_maddeler.map(m => `<span class="tag article">${m}</span>`).join('')}
                    ${decision.anahtar_kelimeler.slice(0, 3).map(k => `<span class="tag">${k}</span>`).join('')}
                </div>
            `;
            
            return card;
        }

        // Search decisions
        function searchDecisions() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (!searchTerm) {
                showAlert('searchAlert', 'LÃ¼tfen bir arama terimi girin!', 'error');
                return;
            }
            
            if (!decisionsData) {
                showAlert('searchAlert', 'KÃ¼tÃ¼phane yÃ¼klenmedi!', 'error');
                return;
            }
            
            const results = [];
            
            Object.keys(decisionsData.kategoriler).forEach(catKey => {
                const category = decisionsData.kategoriler[catKey];
                
                category.kararlar.forEach(decision => {
                    // Search in multiple fields
                    const searchableText = [
                        decision.karar_no,
                        decision.konu,
                        decision.ozet,
                        decision.daire,
                        ...decision.anahtar_kelimeler,
                        ...decision.ilgili_maddeler
                    ].join(' ').toLowerCase();
                    
                    if (searchableText.includes(searchTerm)) {
                        results.push(decision);
                    }
                });
            });
            
            displaySearchResults(results, searchTerm);
        }

        // Handle search keypress
        function handleSearchKeypress(event) {
            if (event.key === 'Enter') {
                searchDecisions();
            }
        }

        // Display search results
        function displaySearchResults(results, searchTerm) {
            const container = document.getElementById('decisionsContainer');
            container.innerHTML = '';
            
            if (results.length === 0) {
                showAlert('searchAlert', 
                    `"${searchTerm}" iÃ§in sonuÃ§ bulunamadÄ±. FarklÄ± anahtar kelimeler deneyin veya kategori filtresini kullanÄ±n.`, 
                    'error');
                
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <h3>ğŸ” SonuÃ§ BulunamadÄ±</h3>
                        <p>Arama Ã¶nerileriniz:</p>
                        <ul style="list-style: none; padding: 0;">
                            <li>â€¢ FarklÄ± anahtar kelimeler deneyin</li>
                            <li>â€¢ Madde numarasÄ± ile arama yapÄ±n (Ã¶rn: CMK 251)</li>
                            <li>â€¢ Kategori filtrelerini kullanÄ±n</li>
                        </ul>
                    </div>
                `;
                return;
            }
            
            showAlert('searchAlert', 
                `"${searchTerm}" iÃ§in ${results.length} sonuÃ§ bulundu.`, 
                'success');
            
            const resultsTitle = document.createElement('h3');
            resultsTitle.textContent = `Arama SonuÃ§larÄ±: "${searchTerm}" (${results.length} sonuÃ§)`;
            resultsTitle.style.color = 'var(--primary-color)';
            resultsTitle.style.marginBottom = '20px';
            container.appendChild(resultsTitle);
            
            results.forEach(decision => {
                container.appendChild(createDecisionCard(decision));
            });
        }

        // Show alert
        function showAlert(elementId, message, type) {
            const alertDiv = document.getElementById(elementId);
            alertDiv.className = `alert alert-${type} show`;
            alertDiv.innerHTML = `<strong>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</strong> ${message}`;
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                hideAlert(elementId);
            }, 5000);
        }

        // Hide alert
        function hideAlert(elementId) {
            const alertDiv = document.getElementById(elementId);
            alertDiv.classList.remove('show');
        }
    </script>
</body>
</html>
